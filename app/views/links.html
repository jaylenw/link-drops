<div ng-init="getDumps()">
    <!-- add links here -->
    <form name = "linkForm" class = "card center animated fadeIn">
        <br>
        <input type = "url" name = "linkInput" class = "center linkInput" placeholder="Enter a new link here." ng-model="enteredLink" ng-paste = "submitLink()">
        <br>
        <p class = "grey-text text-lighten-1 center linkInstructions">If you enjoy typing links by hand, don't forget to add " http:// " or " https:// " and press "Enter"</p>

        <!--This button is required for form submission -->
        <button type = "submit" style = "display: none" ng-click="submitLink()"></button>

        <div class = "grey-text text-lighten-1 center" ng-show = "!findInput">
            <button class="waves-effect waves-light btn z-depth-1 findButton"
            ng-click = "showFind()">
            Find...
            </button>
        </div>

        <br ng-show = "!findInput">

        <div  ng-show = "findInput">
            <input id = "findInput" type = "text" class = "center"
            name = "enterFind" placeholder="What are you looking for?"
            ng-model="enteredFind">
        </div>

    </form>

    <!-- ng repeat all of our links -->
    <!-- outer div for columns -->
    <div class = "columns">
        <ul>
            <!-- using track by to avoid a double appearing links bug when scope is updated -->
            <li ng-repeat="dump in dumps |
            orderBy:'-updated_at':reverse track by dump.updated_at"
            ng-show="([dump] | filter:enteredFind).length > 0"
            class = "center card-panel animated fadeIn linkCard">

                <!-- Display Media Embeds (Bandcamp, Youtube, Vimeo, etc... -->
                <div ng-if = "(dump.content.indexOf('.bandcamp.com/') > -1)
                    || (dump.content.indexOf('https://www.youtube.com/watch?v=') > -1)
                    || (dump.content.indexOf('https://vimeo.com/') > -1)"
                    id = "embed-{{dump.content}}"
                    in-view = "$inview && !dump.lazyEmbed && getEmbed(dump)">
                </div>

                <!-- display soundcloud if it is a soundcloud link (Using their own api) -->
                <div ng-if = "dump.content.indexOf('https://soundcloud.com/') > -1">
                    <iframe id = "scWidget-{{dump.content}}" width="100%" height="400" scrolling="no"
                    in-view = "$inview &&  !dump.lazyEmbed && getSoundCloud(dump)" frameborder="no">
                    </iframe>
                </div>

                <!-- Get our favicon and link title -->
                <img ng-src="{{dump.content | favicon}}" alt="Drop Icon" class = "dropFavicon">
                <a id = "linkTitle-{{$index}}"
                href="{{dump.content}}" target="_blank"
                class = "dropURL"
                ng-init = "getTitle(dump, $index)">
                {{dump.content}}
                </a>

                <br>
                <!-- Last updated -->
                <div class = "grey-text text-lighten-1 linkSubTextContainer">
                    <p class = "dumpedAtText">Dropped at: </p>
                    <p class = "dumpedAtText" ng-bind="dump.updated_at | date:'h:mm MM/dd/yyyy '"></p>
                    <a class = "grey-text text-lighten-1" ng-click = "removeLink(dump)"><p>Delete Dump</p></a>
                </div>

            </li>
        </ul>
    </div>
</div>
